{% extends 'base.html' %}
{% block content %}
  <div class="card p-3">
    <h4>Add Transaction</h4>
    <form method="post">
      <div class="mb-2">
        <label class="form-label">Amount</label>
        <input required name="amount" type="number" step="0.01" class="form-control" />
      </div>
      <div class="mb-2">
        <label class="form-label">Type</label>
        <select name="type" class="form-select">
          <option value="expense">Expense</option>
          <option value="income">Income</option>
        </select>
      </div>
      <div class="mb-2">
        <label class="form-label">Category</label>
        <select name="category" class="form-select" id="catSelect">
          <option value="">Uncategorized</option>
          {% for c in categories %}
            <option value="{{c.id}}">{{c.name}}</option>
          {% endfor %}
          <option value="new">+ Add new category</option>
        </select>
        <input name="new_category" id="newCat" class="form-control mt-2" placeholder="New category name" style="display:none;" />
      </div>
      <div class="mb-2">
        <label class="form-label">Date</label>
        <input name="date" type="date" class="form-control" />
      </div>
      <div class="mb-2">
        <label class="form-label">Note (optional)</label>
        <input name="note" type="text" class="form-control" />
      </div>
      <button class="btn btn-primary">Add</button>
    </form>
  </div>

  <script>
    document.getElementById('catSelect').addEventListener('change', (e)=>{
      const newCat = document.getElementById('newCat');
      newCat.style.display = e.target.value === 'new' ? 'block' : 'none';
    });
  </script>
{% endblock %}
