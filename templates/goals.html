{% extends 'base.html' %}
{% block content %}
<div class="container mt-4">
  <h2 class="mb-3">Your Savings Goals</h2>
  <form method="POST" class="card p-3 mb-4">
    <div class="row g-2">
      <div class="col-md-4">
        <input type="text" name="name" class="form-control" placeholder="Goal name (e.g. Trip to Paris)" required>
      </div>
      <div class="col-md-3">
        <input type="number" name="target_amount" class="form-control" placeholder="Target amount ($)" min="1" step="0.01" required>
      </div>
      <div class="col-md-3">
        <input type="date" name="deadline" class="form-control" placeholder="Deadline">
      </div>
      <div class="col-md-2">
        <button type="submit" class="btn btn-success w-100">Add Goal</button>
      </div>
    </div>
    <div class="mt-2">
      <input type="text" name="description" class="form-control" placeholder="Description (optional)">
    </div>
  </form>

  {% if goals %}
  <div class="row">
    {% for goal in goals %}
    <div class="col-md-6 mb-3">
      <div class="card shadow-sm">
        <div class="card-body">
          <h5 class="card-title">{{ goal.name }}</h5>
          <p class="card-text">Target: <strong>${{ goal.target_amount }}</strong></p>
          {% if goal.deadline %}
          <p class="card-text">Deadline: {{ goal.deadline.strftime('%Y-%m-%d') }}</p>
          {% endif %}
          {% if goal.description %}
          <p class="card-text">{{ goal.description }}</p>
          {% endif %}
          <div class="progress mb-2" style="height: 20px;">
            <div class="progress-bar bg-info" role="progressbar" style="width: {{ (goal.progress/goal.target_amount*100)|round(1) if goal.target_amount else 0 }}%;" aria-valuenow="{{ goal.progress }}" aria-valuemin="0" aria-valuemax="{{ goal.target_amount }}">
              ${{ goal.progress }} / ${{ goal.target_amount }}
            </div>
          </div>
          <!-- TODO: Add edit/delete buttons -->
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
  {% else %}
  <p>No goals yet. Add one above!</p>
  {% endif %}
</div>
{% endblock %}
